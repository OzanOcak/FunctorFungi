<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=53471&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Tanstack React Query | Functor Fungi</title>
<meta name="keywords" content="react, react-query, axios">
<meta name="description" content="Tanstack React Query">
<meta name="author" content="Ozan">
<link rel="canonical" href="http://localhost:53471/posts/tanstack-react-query/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fbb87958984962319e2ee793c41502ed8d6f6d6bccad4d0be2ba9c4f82f0e08c.css" integrity="sha256-&#43;7h5WJhJYjGeLueTxBUC7Y1vbWvMrU0L4rqcT4Lw4Iw=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:53471/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:53471/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:53471/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:53471/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:53471/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:53471/posts/tanstack-react-query/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:53471/" accesskey="h" title="Functor Fungi (Alt + H)">Functor Fungi</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:53471/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:53471/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:53471/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:53471/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:53471/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:53471/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:53471/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Tanstack React Query
    </h1>
    <div class="post-description">
      Tanstack React Query
    </div>
    <div class="post-meta"><span title='2024-11-18 15:00:06 -0500 EST'>November 18, 2024</span>&nbsp;·&nbsp;Ozan

</div>
  </header> 
<figure class="entry-cover"><img loading="eager" src="http://localhost:53471/img/posts/8.png" alt="Abstract Image">
        
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#tanstack-react-query-tutorial" aria-label="TanStack React Query Tutorial">TanStack React Query Tutorial</a><ul>
                        
                <li>
                    <a href="#introduction" aria-label="Introduction">Introduction</a></li>
                <li>
                    <a href="#traditional-data-fetching" aria-label="Traditional Data Fetching">Traditional Data Fetching</a></li>
                <li>
                    <a href="#fetching-with-react-query" aria-label="Fetching with React Query">Fetching with React Query</a></li>
                <li>
                    <a href="#react-query-dev-tools" aria-label="React Query Dev Tools">React Query Dev Tools</a></li>
                <li>
                    <a href="#stale-time" aria-label="Stale Time">Stale Time</a></li>
                <li>
                    <a href="#querying-by-id" aria-label="Querying by ID">Querying by ID</a></li>
                <li>
                    <a href="#pagination" aria-label="Pagination">Pagination</a></li>
                <li>
                    <a href="#infinite-scroll" aria-label="Infinite Scroll">Infinite Scroll</a></li>
                <li>
                    <a href="#infinite-scroll-with-intersection-observer" aria-label="Infinite Scroll with Intersection Observer">Infinite Scroll with Intersection Observer</a></li>
                <li>
                    <a href="#using-mutations" aria-label="Using Mutations">Using Mutations</a></li>
                <li>
                    <a href="#optimistic-updates" aria-label="Optimistic Updates">Optimistic Updates</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="tanstack-react-query-tutorial">TanStack React Query Tutorial<a hidden class="anchor" aria-hidden="true" href="#tanstack-react-query-tutorial">#</a></h2>
<h3 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h3>
<p>TanStack Query (formerly React Query) is a powerful data-fetching library for React applications. It provides hooks for managing server state, simplifying data fetching, caching, synchronization, and updating your UI efficiently.</p>
<p>Before we start, ensure you have the following packages installed in your project:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm create vite@latest
</span></span><span style="display:flex;"><span>npm install axios @tanstack/react-query json-server@0.17.4 react-router-dom
</span></span></code></pre></div><p>In your package.json, add the following script to run the JSON server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#e6db74">&#34;server&#34;</span>: <span style="color:#e6db74">&#34;json-server --watch db.json --port 3001&#34;</span>
</span></span></code></pre></div><h3 id="traditional-data-fetching">Traditional Data Fetching<a hidden class="anchor" aria-hidden="true" href="#traditional-data-fetching">#</a></h3>
<p>In traditional data fetching, we manage loading states and errors manually. Here’s how you can fetch a list of todos using Axios:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">TodoList</span>: <span style="color:#66d9ef">React.FC</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">todos</span>, <span style="color:#a6e22e">setTodos</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>&lt;<span style="color:#f92672">TodoType</span><span style="color:#960050;background-color:#1e0010">[]</span>&gt;([]);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">isLoading</span>, <span style="color:#a6e22e">setIsLoading</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">isError</span>, <span style="color:#a6e22e">setIsError</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fetchPosts</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">axios</span>.<span style="color:#66d9ef">get</span>(<span style="color:#e6db74">&#34;http://localhost:3001/todos&#34;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">setTodos</span>(<span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">setIsError</span>(<span style="color:#66d9ef">true</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">finally</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">setIsLoading</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">fetchPosts</span>();
</span></span><span style="display:flex;"><span>  }, []);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;<span style="color:#a6e22e">Page</span> <span style="color:#66d9ef">is</span> <span style="color:#a6e22e">loading</span>...&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;Error <span style="color:#a6e22e">has</span> <span style="color:#a6e22e">occurred</span>...&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">h2</span>&gt;<span style="color:#a6e22e">Todo</span> <span style="color:#a6e22e">List</span>&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">todos</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">todo</span>) <span style="color:#f92672">=&gt;</span> (
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-item&#34;</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">id</span>}&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-title&#34;</span>&gt;{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">title</span>}&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-body&#34;</span>&gt;{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">body</span>}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      ))}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="fetching-with-react-query">Fetching with React Query<a hidden class="anchor" aria-hidden="true" href="#fetching-with-react-query">#</a></h3>
<p>Using React Query simplifies data fetching significantly. Here’s how to fetch todos with it:</p>
<p>First, wrap your application with QueryClientProvider in main.tsx:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">QueryClient</span>, <span style="color:#a6e22e">QueryClientProvider</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@tanstack/react-query&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">queryClient</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">QueryClient</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">createRoot</span>(document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#34;root&#34;</span>)<span style="color:#f92672">!</span>).<span style="color:#a6e22e">render</span>(
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">StrictMode</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">QueryClientProvider</span> <span style="color:#a6e22e">client</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">queryClient</span>}&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">App</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">QueryClientProvider</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">StrictMode</span>&gt;
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p>Now, let’s fetch the todos using useQuery:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fetchTodos</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">axios</span>.<span style="color:#66d9ef">get</span>(<span style="color:#e6db74">&#34;http://localhost:3001/todos&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">data</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">TodoQuery</span>: <span style="color:#66d9ef">React.FC</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">todos</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isLoading</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isError</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">error</span>,
</span></span><span style="display:flex;"><span>  } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({ <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>], <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchTodos</span> });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;<span style="color:#a6e22e">Loading</span>...&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;Error <span style="color:#a6e22e">fetching</span> <span style="color:#a6e22e">todos</span><span style="color:#f92672">:</span> {<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>}&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">h2</span>&gt;<span style="color:#a6e22e">Todo</span> <span style="color:#a6e22e">Query</span>&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">todos</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">todo</span>: <span style="color:#66d9ef">TodoType</span>) <span style="color:#f92672">=&gt;</span> (
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-item&#34;</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">id</span>}&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-title&#34;</span>&gt;{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">title</span>}&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-body&#34;</span>&gt;{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">body</span>}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      ))}
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="react-query-dev-tools">React Query Dev Tools<a hidden class="anchor" aria-hidden="true" href="#react-query-dev-tools">#</a></h3>
<p>To inspect your queries, install the React Query DevTools:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm i @tanstack/react-query-devtools
</span></span></code></pre></div><p>Then, update main.tsx:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">ReactQueryDevtools</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#34;@tanstack/react-query-devtools&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">StrictMode</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">QueryClientProvider</span> <span style="color:#a6e22e">client</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">queryClient</span>}&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">App</span> /&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">ReactQueryDevtools</span> <span style="color:#a6e22e">initialIsOpen</span><span style="color:#f92672">=</span>{<span style="color:#66d9ef">false</span>} /&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">QueryClientProvider</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">StrictMode</span>&gt;;
</span></span></code></pre></div><p>You can monitor fetching states using isLoading and isFetching:</p>
<p><code>console.log({ isLoading, isFetching });</code>
Initially, both isLoading and isFetching will be true. After fetching, they will both be false.
If you navigate away and return, isLoading will be false, but isFetching will be true if the data is stale.</p>
<h3 id="stale-time">Stale Time<a hidden class="anchor" aria-hidden="true" href="#stale-time">#</a></h3>
<p>Control how long data is considered fresh using the staleTime option in useQuery:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchTodos</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">staleTime</span>: <span style="color:#66d9ef">10000</span>, <span style="color:#75715e">// Data is fresh for 10 seconds
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p>Polling with refetchInterval
To keep fetching data at regular intervals, use refetchInterval:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchTodos</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">refetchInterval</span>: <span style="color:#66d9ef">5000</span>, <span style="color:#75715e">// Refetch every 5 seconds
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p>Triggering Queries on Demand
You can disable automatic fetching and trigger it manually:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">refetch</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>],
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchTodos</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">enabled</span>: <span style="color:#66d9ef">false</span>, <span style="color:#75715e">// Disable auto-fetching
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p>// Button to manually fetch
<code>&lt;button onClick={() =&gt; refetch()}&gt;Fetch&lt;/button&gt;</code></p>
<h3 id="querying-by-id">Querying by ID<a hidden class="anchor" aria-hidden="true" href="#querying-by-id">#</a></h3>
<p>To fetch specific post details by ID, create a route and use useParams:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fetchPostDetails</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">postId</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">undefined</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">axios</span>.<span style="color:#66d9ef">get</span>(<span style="color:#e6db74">`http://localhost:3001/posts/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">postId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PostDetailsRQ</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">postId</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useParams</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">isLoading</span>, <span style="color:#a6e22e">isError</span>, <span style="color:#a6e22e">error</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;posts&#34;</span>, <span style="color:#a6e22e">postId</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryFn</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">fetchPostDetails</span>(<span style="color:#a6e22e">postId</span>),
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;<span style="color:#a6e22e">Page</span> <span style="color:#66d9ef">is</span> <span style="color:#a6e22e">loading</span>...&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;{<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>}&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">body</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">data</span> <span style="color:#f92672">||</span> {};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-details-container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-details-title&#34;</span>&gt;{<span style="color:#a6e22e">title</span>}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-details-body&#34;</span>&gt;{<span style="color:#a6e22e">body</span>}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="pagination">Pagination<a hidden class="anchor" aria-hidden="true" href="#pagination">#</a></h3>
<p>To implement pagination, use query parameters in your fetch function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fetchFruits</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">pageId</span>: <span style="color:#66d9ef">number</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">axios</span>.<span style="color:#66d9ef">get</span>(<span style="color:#e6db74">`http://localhost:4000/fruits/?_page=</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">pageId</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&amp;_per_page=4`</span>);
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">PaginatedQueries</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">page</span>, <span style="color:#a6e22e">setPage</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">isLoading</span>, <span style="color:#a6e22e">isError</span>, <span style="color:#a6e22e">error</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;fruits&#34;</span>, <span style="color:#a6e22e">page</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryFn</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">fetchFruits</span>(<span style="color:#a6e22e">page</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">keepPreviousData</span>: <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// Keep previous data while loading
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Handle loading and error states
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">h2</span>&gt;<span style="color:#a6e22e">Page</span> <span style="color:#66d9ef">is</span> <span style="color:#a6e22e">Loading</span>...&lt;/<span style="color:#f92672">h2</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">h1</span>&gt;{<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>}&lt;/<span style="color:#f92672">h1</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">data</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">item</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">number</span>; <span style="color:#a6e22e">name</span>: <span style="color:#66d9ef">string</span> }) <span style="color:#f92672">=&gt;</span> (
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">id</span>} <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fruit-label&#34;</span>&gt;
</span></span><span style="display:flex;"><span>          {<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">name</span>}
</span></span><span style="display:flex;"><span>        &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>      ))}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{() <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">setPage</span>((<span style="color:#a6e22e">prev</span>) <span style="color:#f92672">=&gt;</span> Math.<span style="color:#a6e22e">max</span>(<span style="color:#a6e22e">prev</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>))}&gt;
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Prev</span> <span style="color:#a6e22e">Page</span>
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{() <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">setPage</span>((<span style="color:#a6e22e">prev</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">prev</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)}&gt;<span style="color:#a6e22e">Next</span> <span style="color:#a6e22e">Page</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="infinite-scroll">Infinite Scroll<a hidden class="anchor" aria-hidden="true" href="#infinite-scroll">#</a></h3>
<p>To implement infinite scrolling, use useInfiniteQuery:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fetchAnimals</span> <span style="color:#f92672">=</span> ({ <span style="color:#a6e22e">pageParam</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> }<span style="color:#f92672">:</span> <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">axios</span>.<span style="color:#66d9ef">get</span>(
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">`http://localhost:3001/animals/?_limit=10&amp;_page=</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">pageParam</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">InfiniteQueries</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">isLoading</span>, <span style="color:#a6e22e">isError</span>, <span style="color:#a6e22e">error</span>, <span style="color:#a6e22e">fetchNextPage</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useInfiniteQuery</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;animals&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchAnimals</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">getNextPageParam</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">lastPage</span>, <span style="color:#a6e22e">allPages</span>) <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">allPages</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">allPages</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">1</span> : <span style="color:#66d9ef">undefined</span>,
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">h2</span>&gt;<span style="color:#a6e22e">Page</span> <span style="color:#66d9ef">is</span> <span style="color:#a6e22e">Loading</span>...&lt;/<span style="color:#f92672">h2</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">h1</span>&gt;{<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>}&lt;/<span style="color:#f92672">h1</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">data</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">pages</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">page</span>) <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">animal</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">number</span>; <span style="color:#a6e22e">name</span>: <span style="color:#66d9ef">string</span> }) <span style="color:#f92672">=&gt;</span> (
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fruit-item&#34;</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">animal</span>.<span style="color:#a6e22e">id</span>}&gt;
</span></span><span style="display:flex;"><span>            {<span style="color:#a6e22e">animal</span>.<span style="color:#a6e22e">name</span>}
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        ))
</span></span><span style="display:flex;"><span>      )}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">onClick</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">fetchNextPage</span>}&gt;<span style="color:#a6e22e">Load</span> <span style="color:#a6e22e">More</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="infinite-scroll-with-intersection-observer">Infinite Scroll with Intersection Observer<a hidden class="anchor" aria-hidden="true" href="#infinite-scroll-with-intersection-observer">#</a></h3>
<p>You can enhance the infinite scroll by using react-intersection-observer:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">InfiniteQueries2</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">data</span>, <span style="color:#a6e22e">isLoading</span>, <span style="color:#a6e22e">isError</span>, <span style="color:#a6e22e">error</span>, <span style="color:#a6e22e">fetchNextPage</span>, <span style="color:#a6e22e">isFetchingNextPage</span> } <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">useInfiniteQuery</span>({
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;animals&#34;</span>],
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchAnimals</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">getNextPageParam</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">lastPage</span>, <span style="color:#a6e22e">allPages</span>) <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">allPages</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">allPages</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">1</span> : <span style="color:#66d9ef">undefined</span>,
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">ref</span>, <span style="color:#a6e22e">inView</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useInView</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">inView</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">fetchNextPage</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">fetchNextPage</span>, <span style="color:#a6e22e">inView</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">h2</span>&gt;<span style="color:#a6e22e">Page</span> <span style="color:#66d9ef">is</span> <span style="color:#a6e22e">Loading</span>...&lt;/<span style="color:#f92672">h2</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">h1</span>&gt;{<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>}&lt;/<span style="color:#f92672">h1</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      {<span style="color:#a6e22e">data</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">pages</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">page</span>) <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">animal</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">number</span>; <span style="color:#a6e22e">name</span>: <span style="color:#66d9ef">string</span> }) <span style="color:#f92672">=&gt;</span> (
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fruit-item&#34;</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">animal</span>.<span style="color:#a6e22e">id</span>}&gt;
</span></span><span style="display:flex;"><span>            {<span style="color:#a6e22e">animal</span>.<span style="color:#a6e22e">name</span>}
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>        ))
</span></span><span style="display:flex;"><span>      )}
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">ref</span>}&gt;{<span style="color:#a6e22e">isFetchingNextPage</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#e6db74">&#34;Loading...&#34;</span>}&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="using-mutations">Using Mutations<a hidden class="anchor" aria-hidden="true" href="#using-mutations">#</a></h3>
<p>To add a new todo using mutations:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">addTodo</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">todo</span>: <span style="color:#66d9ef">AddTodoType</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">response</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">axios</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#34;http://localhost:3001/todos&#34;</span>, <span style="color:#a6e22e">todo</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">response</span>.<span style="color:#a6e22e">data</span>;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">AddTodo</span> <span style="color:#f92672">=</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">setTitle</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">setBody</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">useState</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">todos</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isLoading</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">isError</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">error</span>,
</span></span><span style="display:flex;"><span>  } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useQuery</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>],
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryFn</span>: <span style="color:#66d9ef">fetchPosts</span>,
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">mutate</span>: <span style="color:#66d9ef">addTodoMutation</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useMutation</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mutationFn</span>: <span style="color:#66d9ef">addTodo</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">onSuccess</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">queryClient</span>.<span style="color:#a6e22e">invalidateQueries</span>({ <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>] });
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">handleSubmit</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">e</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">preventDefault</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span> }) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">newTodo</span>: <span style="color:#66d9ef">AddTodoType</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">body</span> };
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">addTodoMutation</span>(<span style="color:#a6e22e">newTodo</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setTitle</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">setBody</span>(<span style="color:#e6db74">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isLoading</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;<span style="color:#a6e22e">Page</span> <span style="color:#66d9ef">is</span> <span style="color:#a6e22e">loading</span>...&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">isError</span>) <span style="color:#66d9ef">return</span> &lt;<span style="color:#f92672">div</span>&gt;{<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>}&lt;/<span style="color:#f92672">div</span>&gt;;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">onSubmit</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">handleSubmit</span>}&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">input</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">onChange</span><span style="color:#f92672">=</span>{(<span style="color:#a6e22e">e</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">setTitle</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">value</span>)}
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Enter post title&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">title</span>}
</span></span><span style="display:flex;"><span>        /&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">input</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">onChange</span><span style="color:#f92672">=</span>{(<span style="color:#a6e22e">e</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">setBody</span>(<span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">target</span>.<span style="color:#a6e22e">value</span>)}
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">placeholder</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Enter post body&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">body</span>}
</span></span><span style="display:flex;"><span>        /&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;<span style="color:#a6e22e">Post</span>&lt;/<span style="color:#f92672">button</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">form</span>&gt;
</span></span><span style="display:flex;"><span>      &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-list&#34;</span>&gt;
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">h2</span>&gt;<span style="color:#a6e22e">Add</span> <span style="color:#a6e22e">Todo</span> <span style="color:#a6e22e">Query</span>&lt;/<span style="color:#f92672">h2</span>&gt;
</span></span><span style="display:flex;"><span>        {<span style="color:#a6e22e">todos</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">todo</span>: <span style="color:#66d9ef">TodoType</span>) <span style="color:#f92672">=&gt;</span> (
</span></span><span style="display:flex;"><span>          &lt;<span style="color:#f92672">Link</span> <span style="color:#a6e22e">key</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">id</span>} <span style="color:#a6e22e">to</span><span style="color:#f92672">=</span>{<span style="color:#e6db74">`/todos/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>}&gt;
</span></span><span style="display:flex;"><span>            &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-item&#34;</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">h3</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-title&#34;</span>&gt;{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">title</span>}&lt;/<span style="color:#f92672">h3</span>&gt;
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">p</span> <span style="color:#a6e22e">className</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;todo-body&#34;</span>&gt;{<span style="color:#a6e22e">todo</span>.<span style="color:#a6e22e">body</span>}&lt;/<span style="color:#f92672">p</span>&gt;
</span></span><span style="display:flex;"><span>            &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>          &lt;/<span style="color:#f92672">Link</span>&gt;
</span></span><span style="display:flex;"><span>        ))}
</span></span><span style="display:flex;"><span>      &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  );
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="optimistic-updates">Optimistic Updates<a hidden class="anchor" aria-hidden="true" href="#optimistic-updates">#</a></h3>
<p>To implement optimistic updates, use the onMutate callback:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> { <span style="color:#a6e22e">mutate</span>: <span style="color:#66d9ef">addTodoMutation</span> } <span style="color:#f92672">=</span> <span style="color:#a6e22e">useMutation</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mutationFn</span>: <span style="color:#66d9ef">addTodo</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">onMutate</span>: <span style="color:#66d9ef">async</span> (<span style="color:#a6e22e">newTodo</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">queryClient</span>.<span style="color:#a6e22e">cancelQueries</span>({ <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>] });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">previousTodos</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">queryClient</span>.<span style="color:#a6e22e">getQueryData</span>([<span style="color:#e6db74">&#34;todos&#34;</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryClient</span>.<span style="color:#a6e22e">setQueryData</span>([<span style="color:#e6db74">&#34;todos&#34;</span>], (<span style="color:#a6e22e">oldTodos</span><span style="color:#f92672">:</span> []) <span style="color:#f92672">=&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">oldTodos</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">?</span> [...<span style="color:#a6e22e">oldTodos</span>, { ...<span style="color:#a6e22e">newTodo</span>, <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">String</span>(<span style="color:#a6e22e">oldTodos</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) }]
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">:</span> <span style="color:#a6e22e">oldTodos</span>
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">previousTodos</span> };
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">onError</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">error</span>, <span style="color:#a6e22e">newTodo</span>, <span style="color:#a6e22e">context</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryClient</span>.<span style="color:#a6e22e">setQueryData</span>([<span style="color:#e6db74">&#34;todos&#34;</span>], <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">previousTodos</span>);
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">onSettled</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">queryClient</span>.<span style="color:#a6e22e">invalidateQueries</span>({ <span style="color:#a6e22e">queryKey</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;todos&#34;</span>] });
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h3>
<p>TanStack React Query streamlines the process of fetching, caching, and syncing server state in React applications. By leveraging its powerful features, you can enhance your application&rsquo;s performance and user experience significantly.</p>
<p>Further Reading
Explore the official documentation for more advanced usage and best practices.</p>
<p>You can check out the react-query project on <a href="https://github.com/OzanOcak/react-query-app">github</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:53471/tags/react/">React</a></li>
      <li><a href="http://localhost:53471/tags/react-query/">React-Query</a></li>
      <li><a href="http://localhost:53471/tags/axios/">Axios</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:53471/">Functor Fungi</a></span>
       
   
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
